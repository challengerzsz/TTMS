
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Access-Control-Allow-Origin" content="http://120.79.196.225">
	<title>注册</title>
	<script src="https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
	<script src="../materialize-v0.97.8/materialize/js/materialize.min.js"></script>
  <link rel="stylesheet" type="text/css" href="../materialize-v0.97.8/materialize/css/materialize.min.css">
  <style type="text/css">
		*{
			padding:0;
			margin:0;
		}

		body{
			background-image: url(../image/movie.jpg);
			background-size: 100% 100%;
			background-attachment: fixed;
		}
		.row{
			position: relative;
			position: fixed;  top:5%; right:17%;
			padding:20px;
			width:350px;
			height:580px;
			background-color: white;
			border-radius: 20px;
		}
		
		#sign{
			position: absolute;bottom:2%; left:40px;
			width:80%;
		}
  </style>
</head>
<body>
 	<div class="row">
		<!--  <form class="col s12"> -->
		      <div class="row">
			        <div class="input-field col s12">
			          <i class="material-icons prefix"><img src="../image/person.png" width="34px"  /></i>
			          <input id="icon_prefix" type="text" class="validate  username" name="username"/>
			          <label for="icon_prefix">username</label>
			        </div>
			        <div class="input-field col s12">
			          <i class="material-icons prefix"><img src="../image/person.png"  width="34px" /></i>
			          <input id="icon_telephone" type="tel" class="validate  realName" name="realName"/>
			          <label for="icon_telephone">real name</label>
			        </div>
			        <div class="input-field col s12">
			          <i class="material-icons prefix"><img src="../image/mi.png" width="34px"  /></i>
			          <input id="icon_telephone" type="tel" class="validate  password" name="password"/>
			          <label for="icon_telephone">password</label>
			        </div>
			        <div class="input-field col s12">
			          <i class="material-icons prefix"><img src="../image/phone.png"  width="34px" /></i>
			          <input id="icon_telephone" type="tel" class="validate  phone" name="phone"/>
			          <label for="icon_telephone">phone</label>
			        </div>
			        <div class="input-field col s12">
			          <i class="material-icons prefix"><img src="../image/email.png" width="34px" /></i>
			          <input id="icon_telephone" type="tel" class="validate   email" name="email"/>
			          <label for="icon_telephone">email</label>
			        </div>
			        <div class="input-field col s12">
			          <i class="material-icons prefix"><img src="../image/address.png"  width="34px"/></i>
			          <input id="icon_telephone" type="tel" class="validate   address" name="address"/>
			          <label for="icon_telephone">address</label>
			        </div>
		            <button class="btn waves-effect waves-light" id="sign"  >注册</button>
		  </div>
		 <!--  </form> -->
	</div>
  </div>
</body>
</html>
<script type="text/javascript">
window.onload=function(){
	var signBtn = document.getElementById('sign');
	signBtn.onclick=function(){
		sign();
	}
}
function sign()
 {
	var xmlhttp;
	if (window.XMLHttpRequest)
	{
		//  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码
		xmlhttp=new XMLHttpRequest();
	}
	else
	{
		// IE6, IE5 浏览器执行代码
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200)
		{

			 var personInformation=JSON.parse(xmlhttp.responseText);
			 if(personInformation.status=="1")
			 {
			 	 alert("注册成功");
			 	 window.open("login.html","_self");
			 }
			 else{
			 	alert("注册失败");
			 }
			
		}
	}

	var name = document.getElementsByClassName('username')[0].value;
	var password = document.getElementsByClassName("password")[0].value;
	var phone = document.getElementsByClassName("phone")[0].value;
	var email = document.getElementsByClassName("email")[0].value;
	var address = document.getElementsByClassName("address")[0].value;
	var realName = document.getElementsByClassName("realName")[0].value;
	var signMessage ={
		"username":name,
		"password":password,
		"type":"0",
		"realName":realName,
		"email":email,
		"phone":phone,
		"address":address
	}
	xmlhttp.open("POST","/TTMS/users/register",true);
	xmlhttp.setRequestHeader("Content-type","application/json");
	xmlhttp.setRequestHeader("Access-Control-Allow-Origin","*");
	xmlhttp.send(JSON.stringify(signMessage));
 }
</script>

